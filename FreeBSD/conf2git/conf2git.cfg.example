# conf2git.cfg.example â€” Example configuration (copy to /usr/local/scripts/conf2git.cfg)

# -----------------------------------------------------------------------------
# REQUIRED: Directories to export
# -----------------------------------------------------------------------------
CONF_DIRS="/etc /usr/local/etc /usr/local/scripts"

# -----------------------------------------------------------------------------
# REQUIRED: Repo layout and paths
# -----------------------------------------------------------------------------
BASE_DIR="Servers"
REPO_ROOT="/var/git-export/Servers"
GIT_REPO_URL="git@your.git.host:group/servers.git"
# Use a per-host path (examples):
#   FreeBSD host "arcos" -> "freebsd/arcos"
#   Linux host   "wh01"  -> "linux/wh01"
TARGET_PATH="freebsd/arcos"
REPO_DIR="${REPO_ROOT}/${TARGET_PATH}"

# -----------------------------------------------------------------------------
# REQUIRED: Lock + Git identity
# -----------------------------------------------------------------------------
LOCKFILE="/var/run/conf2git.lock"
GIT_USER_NAME="conf2git"
GIT_USER_EMAIL="conf2git@example.com"

# -----------------------------------------------------------------------------
# Optional: Logging (if set, logs also go to this file)
# -----------------------------------------------------------------------------
LOGFILE="/var/log/conf2git.log"

# -----------------------------------------------------------------------------
# Remote alignment policy
#   rebase (default): fetch/prune, try FF, rebase; if no local commits -> hard reset
#   reset: always fetch/prune + hard reset to origin/<branch>
# -----------------------------------------------------------------------------
ALIGN_MODE="rebase"

# -----------------------------------------------------------------------------
# v1.7.0: Lock behavior across FreeBSD/Linux
#   yes -> block until lock is free (lockf -k / flock blocking)
#   no  -> fail fast if another run is active (lockf -t 0 / flock -n)
# -----------------------------------------------------------------------------
LOCK_BLOCKING="no"

# -----------------------------------------------------------------------------
# v1.7.0: Git retries for flaky networks
# -----------------------------------------------------------------------------
GIT_RETRY_MAX="3"

# -----------------------------------------------------------------------------
# v1.7.0: Optional push control (commit-only mode)
# -----------------------------------------------------------------------------
PUSH_ENABLED="yes"

# -----------------------------------------------------------------------------
# v1.7.0: Optional safe.directory to silence dubious ownership warnings
# -----------------------------------------------------------------------------
GIT_MARK_SAFE="no"

# -----------------------------------------------------------------------------
# v1.7.0: Self-update is CLI-only; these variables are honored ONLY when the
# script is invoked with --self-update or --self-update-only.
# -----------------------------------------------------------------------------
UPDATE_URL="UPDATE_URL="https://raw.githubusercontent.com/kmansur/Scripts/refs/heads/main/FreeBSD/conf2git/conf2git.sh"
# EXPECTED_SHA256=""   # optional integrity pin

# -----------------------------------------------------------------------------
# NOTES:
# - AUTO_UPDATE is deprecated as of v1.7.0 and is ignored on normal runs.
# - Do NOT schedule --self-update in cron; run it manually or during maintenance.
# -----------------------------------------------------------------------------
